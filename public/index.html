<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GBWAA 10U Clinic Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      src="https://unpkg.com/react@18/umd/react.development.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      crossorigin
    ></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  </head>
  <body class="bg-white text-black">
    <div id="root"></div>

    <script type="text/babel">
      const { useState } = React;

      function App() {
        const initialForm = {
          playerName: "",
          age: "8",
          lastLevel: "Spring 8U",
          email: "",
        };
        const [formData, setFormData] = useState(initialForm);
        const [submitted, setSubmitted] = useState(false);

        const handleChange = (e) => {
          const { name, value } = e.target;
          setFormData((prev) => ({ ...prev, [name]: value }));
        };

        const handleSubmit = async (e) => {
          e.preventDefault();
          const url =
            "https://script.google.com/macros/s/AKfycbwVEU_HUaORThrhAr_7bnF-bC50qtEN21M31VJ1uL4oZ7SdAZICNJcqWxj32quqRW_6/exec";
          fetch(url, {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: `Name=${formData.playerName}&Age=${formData.age}&Level=${formData.lastLevel}&Email=${formData.email}`,
          })
            .then((res) => res.text())
            .then((data) => {
              alert(data);
            })
            .catch((error) => console.log(error));
        };

        if (submitted) {
          return (
            <div className="min-h-screen flex flex-col justify-center items-center bg-white text-center">
              <p className="mb-4 text-xl">
                Your form has been submitted. Would you like to submit another?
              </p>
              <button
                onClick={resetForm}
                className="px-4 py-2 bg-[rgb(94,41,133)] text-white rounded"
              >
                Submit Another
              </button>
            </div>
          );
        }

        return (
          <div className="min-h-screen flex flex-col items-center bg-white p-4">
            <img src="gbwaa_logo.png" alt="GBWAA Logo" className="w-48 mb-4" />
            <form
              onSubmit={handleSubmit}
              className="w-full max-w-sm bg-gray-100 p-4 rounded shadow"
            >
              <div className="mb-4">
                <label className="block mb-1" htmlFor="playerName">
                  Player’s Name
                </label>
                <input
                  id="playerName"
                  name="playerName"
                  type="text"
                  required
                  value={formData.playerName}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                />
              </div>

              <div className="mb-4">
                <label className="block mb-1" htmlFor="age">
                  Player’s Age as of August 2025
                </label>
                <select
                  id="age"
                  name="age"
                  value={formData.age}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                >
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </div>

              <div className="mb-4">
                <label className="block mb-1" htmlFor="lastLevel">
                  Last Level of Softball Completed
                </label>
                <select
                  id="lastLevel"
                  name="lastLevel"
                  value={formData.lastLevel}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                >
                  <option>Spring 8U</option>
                  <option>Spring 10U</option>
                  <option>Fall 8U</option>
                  <option>Fall 10U</option>
                  <option>Other</option>
                </select>
              </div>

              <div className="mb-4">
                <label className="block mb-1" htmlFor="email">
                  Parent’s Email
                </label>
                <input
                  id="email"
                  name="email"
                  type="email"
                  required
                  value={formData.email}
                  onChange={handleChange}
                  className="w-full p-2 border rounded"
                />
              </div>

              <button
                type="submit"
                className="w-full py-2 bg-[rgb(94,41,133)] text-white rounded"
              >
                Submit
              </button>
            </form>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
